<!DOCTYPE html>
<html>
    <head>
        <title>LocatorApp</title>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script data-main="scripts/main" src="scripts/require.js"></script>
    </head>
    <body>
        <p id='test'>
            init
        </p>
        <div id='users'>
        </div>
        <script>
            var userElements = document.getElementById('users');
            function arrangeUsers(userlist) {
                userlist.forEach(user => {
                    var userInfo = document.getElementById(user.username);
                    if (userInfo == null) {
                        userInfo = document.createElement("p");
                        userInfo.id = user.username;
                        userInfo.innerHTML = user.username + ' : ' + user.loc + ' : ' + user.phone;
                        userElements.appendChild(userInfo);
                    } else {
                        userInfo.innerHTML = user.username + ' : ' + user.loc + ' : ' + user.phone;
                    }
                    console.log(userInfo);
                });
            }

            temp = document.getElementById('test');//creates a reference to the canvas

            var test = 0;
            
            function fetchData() {
                $.get('/test',function (data) {
                    test = data;
                    //console.log(data);
                    arrangeUsers(data.body);
                });                
            }
            setInterval(fetchData, 1000);
        </script>
    </body>
</html>